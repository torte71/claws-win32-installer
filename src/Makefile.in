# Makefile.in generated by automake 1.14.1 from Makefile.am.
# @configure_input@

# Copyright (C) 1994-2013 Free Software Foundation, Inc.

# This Makefile.in is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

@SET_MAKE@

# Makefile.am - Installer for GnuPG 4 Windows Makefile.
# Copyright (C) 2005, 2006, 2007, 2008, 2009 g10 Code GmbH
#
# This file is part of Gpg4win.
#
# Gpg4win is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# Gpg4win is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, see <http://www.gnu.org/licenses/>.
VPATH = @srcdir@
am__is_gnu_make = test -n '$(MAKEFILE_LIST)' && test -n '$(MAKELEVEL)'
am__make_running_with_option = \
  case $${target_option-} in \
      ?) ;; \
      *) echo "am__make_running_with_option: internal error: invalid" \
              "target option '$${target_option-}' specified" >&2; \
         exit 1;; \
  esac; \
  has_opt=no; \
  sane_makeflags=$$MAKEFLAGS; \
  if $(am__is_gnu_make); then \
    sane_makeflags=$$MFLAGS; \
  else \
    case $$MAKEFLAGS in \
      *\\[\ \	]*) \
        bs=\\; \
        sane_makeflags=`printf '%s\n' "$$MAKEFLAGS" \
          | sed "s/$$bs$$bs[$$bs $$bs	]*//g"`;; \
    esac; \
  fi; \
  skip_next=no; \
  strip_trailopt () \
  { \
    flg=`printf '%s\n' "$$flg" | sed "s/$$1.*$$//"`; \
  }; \
  for flg in $$sane_makeflags; do \
    test $$skip_next = yes && { skip_next=no; continue; }; \
    case $$flg in \
      *=*|--*) continue;; \
        -*I) strip_trailopt 'I'; skip_next=yes;; \
      -*I?*) strip_trailopt 'I';; \
        -*O) strip_trailopt 'O'; skip_next=yes;; \
      -*O?*) strip_trailopt 'O';; \
        -*l) strip_trailopt 'l'; skip_next=yes;; \
      -*l?*) strip_trailopt 'l';; \
      -[dEDm]) skip_next=yes;; \
      -[JT]) skip_next=yes;; \
    esac; \
    case $$flg in \
      *$$target_option*) has_opt=yes; break;; \
    esac; \
  done; \
  test $$has_opt = yes
am__make_dryrun = (target_option=n; $(am__make_running_with_option))
am__make_keepgoing = (target_option=k; $(am__make_running_with_option))
pkgdatadir = $(datadir)/@PACKAGE@
pkgincludedir = $(includedir)/@PACKAGE@
pkglibdir = $(libdir)/@PACKAGE@
pkglibexecdir = $(libexecdir)/@PACKAGE@
am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
install_sh_DATA = $(install_sh) -c -m 644
install_sh_PROGRAM = $(install_sh) -c
install_sh_SCRIPT = $(install_sh) -c
INSTALL_HEADER = $(INSTALL_DATA)
transform = $(program_transform_name)
NORMAL_INSTALL = :
PRE_INSTALL = :
POST_INSTALL = :
NORMAL_UNINSTALL = :
PRE_UNINSTALL = :
POST_UNINSTALL = :
build_triplet = @build@
host_triplet = @host@
subdir = src
DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Makefile.am \
	$(top_srcdir)/mkinstalldirs $(srcdir)/config.nsi.in \
	$(srcdir)/gpg4win.mk.in
ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
am__aclocal_m4_deps = $(top_srcdir)/m4/gpg4win.m4 \
	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
	$(top_srcdir)/m4/progtest.m4 $(top_srcdir)/configure.ac
am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
	$(ACLOCAL_M4)
mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
CONFIG_HEADER = $(top_builddir)/config.h
CONFIG_CLEAN_FILES = config.nsi gpg4win.mk
CONFIG_CLEAN_VPATH_FILES =
AM_V_P = $(am__v_P_@AM_V@)
am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)
am__v_P_0 = false
am__v_P_1 = :
AM_V_GEN = $(am__v_GEN_@AM_V@)
am__v_GEN_ = $(am__v_GEN_@AM_DEFAULT_V@)
am__v_GEN_0 = @echo "  GEN     " $@;
am__v_GEN_1 = 
AM_V_at = $(am__v_at_@AM_V@)
am__v_at_ = $(am__v_at_@AM_DEFAULT_V@)
am__v_at_0 = @
am__v_at_1 = 
SOURCES =
DIST_SOURCES =
RECURSIVE_TARGETS = all-recursive check-recursive cscopelist-recursive \
	ctags-recursive dvi-recursive html-recursive info-recursive \
	install-data-recursive install-dvi-recursive \
	install-exec-recursive install-html-recursive \
	install-info-recursive install-pdf-recursive \
	install-ps-recursive install-recursive installcheck-recursive \
	installdirs-recursive pdf-recursive ps-recursive \
	tags-recursive uninstall-recursive
am__can_run_installinfo = \
  case $$AM_UPDATE_INFO_DIR in \
    n|no|NO) false;; \
    *) (install-info --version) >/dev/null 2>&1;; \
  esac
RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive	\
  distclean-recursive maintainer-clean-recursive
am__recursive_targets = \
  $(RECURSIVE_TARGETS) \
  $(RECURSIVE_CLEAN_TARGETS) \
  $(am__extra_recursive_targets)
AM_RECURSIVE_TARGETS = $(am__recursive_targets:-recursive=) TAGS CTAGS \
	distdir
am__tagged_files = $(HEADERS) $(SOURCES) $(TAGS_FILES) $(LISP)
# Read a list of newline-separated strings from the standard input,
# and print each of them once, without duplicates.  Input order is
# *not* preserved.
am__uniquify_input = $(AWK) '\
  BEGIN { nonempty = 0; } \
  { items[$$0] = 1; nonempty = 1; } \
  END { if (nonempty) { for (i in items) print i; }; } \
'
# Make sure the list of sources is unique.  This is necessary because,
# e.g., the same source file might be shared among _SOURCES variables
# for different programs/libraries.
am__define_uniq_tagged_files = \
  list='$(am__tagged_files)'; \
  unique=`for i in $$list; do \
    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
  done | $(am__uniquify_input)`
ETAGS = etags
CTAGS = ctags
DIST_SUBDIRS = $(SUBDIRS)
DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
am__relativize = \
  dir0=`pwd`; \
  sed_first='s,^\([^/]*\)/.*$$,\1,'; \
  sed_rest='s,^[^/]*/*,,'; \
  sed_last='s,^.*/\([^/]*\)$$,\1,'; \
  sed_butlast='s,/*[^/]*$$,,'; \
  while test -n "$$dir1"; do \
    first=`echo "$$dir1" | sed -e "$$sed_first"`; \
    if test "$$first" != "."; then \
      if test "$$first" = ".."; then \
        dir2=`echo "$$dir0" | sed -e "$$sed_last"`/"$$dir2"; \
        dir0=`echo "$$dir0" | sed -e "$$sed_butlast"`; \
      else \
        first2=`echo "$$dir2" | sed -e "$$sed_first"`; \
        if test "$$first2" = "$$first"; then \
          dir2=`echo "$$dir2" | sed -e "$$sed_rest"`; \
        else \
          dir2="../$$dir2"; \
        fi; \
        dir0="$$dir0"/"$$first"; \
      fi; \
    fi; \
    dir1=`echo "$$dir1" | sed -e "$$sed_rest"`; \
  done; \
  reldir="$$dir2"
ACLOCAL = @ACLOCAL@
AMTAR = @AMTAR@
AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
AR = @AR@
AUTOCONF = @AUTOCONF@
AUTOHEADER = @AUTOHEADER@
AUTOMAKE = @AUTOMAKE@
AWK = @AWK@
BUILD_CC = @BUILD_CC@
BUILD_FILEVERSION = @BUILD_FILEVERSION@
BUILD_ISODATE = @BUILD_ISODATE@
BUILD_TIMESTAMP = @BUILD_TIMESTAMP@
CC = @CC@
CCDEPMODE = @CCDEPMODE@
CFLAGS = @CFLAGS@
CONVERT = @CONVERT@
CP = @CP@
CPP = @CPP@
CPPFLAGS = @CPPFLAGS@
CYGPATH_W = @CYGPATH_W@
DEFS = @DEFS@
DEPDIR = @DEPDIR@
DLLTOOL = @DLLTOOL@
DOCBOOK2HTML = @DOCBOOK2HTML@
DOCBOOK2PDF = @DOCBOOK2PDF@
DOCBOOK2PS = @DOCBOOK2PS@
DOCBOOK2TXT = @DOCBOOK2TXT@
DVIPDF = @DVIPDF@
ECHO_C = @ECHO_C@
ECHO_N = @ECHO_N@
ECHO_T = @ECHO_T@
EXEEXT = @EXEEXT@
EXTRA_MAKENSIS_FLAGS = @EXTRA_MAKENSIS_FLAGS@
GMSGFMT = @GMSGFMT@
GMSGFMT_015 = @GMSGFMT_015@
GPG4WIN_DEBUG = @GPG4WIN_DEBUG@
HAVE_PKG_ADNS = @HAVE_PKG_ADNS@
HAVE_PKG_ATK = @HAVE_PKG_ATK@
HAVE_PKG_BZIP2 = @HAVE_PKG_BZIP2@
HAVE_PKG_CAIRO = @HAVE_PKG_CAIRO@
HAVE_PKG_CLAWS_MAIL = @HAVE_PKG_CLAWS_MAIL@
HAVE_PKG_CRYPT = @HAVE_PKG_CRYPT@
HAVE_PKG_CURL = @HAVE_PKG_CURL@
HAVE_PKG_DIRMNGR = @HAVE_PKG_DIRMNGR@
HAVE_PKG_ENCHANT = @HAVE_PKG_ENCHANT@
HAVE_PKG_EXPAT = @HAVE_PKG_EXPAT@
HAVE_PKG_FONTCONFIG = @HAVE_PKG_FONTCONFIG@
HAVE_PKG_FREETYPE = @HAVE_PKG_FREETYPE@
HAVE_PKG_GDK_PIXBUF = @HAVE_PKG_GDK_PIXBUF@
HAVE_PKG_GETTEXT = @HAVE_PKG_GETTEXT@
HAVE_PKG_GLIB = @HAVE_PKG_GLIB@
HAVE_PKG_GNUPG2 = @HAVE_PKG_GNUPG2@
HAVE_PKG_GNUTLS = @HAVE_PKG_GNUTLS@
HAVE_PKG_GPA = @HAVE_PKG_GPA@
HAVE_PKG_GPGME = @HAVE_PKG_GPGME@
HAVE_PKG_GTK_ = @HAVE_PKG_GTK_@
HAVE_PKG_LIBASSUAN = @HAVE_PKG_LIBASSUAN@
HAVE_PKG_LIBETPAN = @HAVE_PKG_LIBETPAN@
HAVE_PKG_LIBFFI = @HAVE_PKG_LIBFFI@
HAVE_PKG_LIBGCRYPT = @HAVE_PKG_LIBGCRYPT@
HAVE_PKG_LIBGPG_ERROR = @HAVE_PKG_LIBGPG_ERROR@
HAVE_PKG_LIBGSASL = @HAVE_PKG_LIBGSASL@
HAVE_PKG_LIBICONV = @HAVE_PKG_LIBICONV@
HAVE_PKG_LIBKSBA = @HAVE_PKG_LIBKSBA@
HAVE_PKG_LIBPNG = @HAVE_PKG_LIBPNG@
HAVE_PKG_LIBTASN1 = @HAVE_PKG_LIBTASN1@
HAVE_PKG_LIBXML2 = @HAVE_PKG_LIBXML2@
HAVE_PKG_PANGO = @HAVE_PKG_PANGO@
HAVE_PKG_PINENTRY = @HAVE_PKG_PINENTRY@
HAVE_PKG_PKGCONFIG = @HAVE_PKG_PKGCONFIG@
HAVE_PKG_REGEX = @HAVE_PKG_REGEX@
HAVE_PKG_W32PTH = @HAVE_PKG_W32PTH@
HAVE_PKG_ZLIB = @HAVE_PKG_ZLIB@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
IS_BETA_BUILD = @IS_BETA_BUILD@
LDFLAGS = @LDFLAGS@
LIBOBJS = @LIBOBJS@
LIBS = @LIBS@
LTLIBOBJS = @LTLIBOBJS@
MAINT = @MAINT@
MAKE = @MAKE@
MAKEINFO = @MAKEINFO@
MAKENSIS = @MAKENSIS@
MKDIR = @MKDIR@
MKDIR_P = @MKDIR_P@
MSGFMT = @MSGFMT@
MSGFMT_015 = @MSGFMT_015@
MSGMERGE = @MSGMERGE@
NUMPROC = @NUMPROC@
OBJEXT = @OBJEXT@
PACKAGE = @PACKAGE@
PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_STRING = @PACKAGE_STRING@
PACKAGE_TARNAME = @PACKAGE_TARNAME@
PACKAGE_URL = @PACKAGE_URL@
PACKAGE_VERSION = @PACKAGE_VERSION@
PATH_SEPARATOR = @PATH_SEPARATOR@
RANLIB = @RANLIB@
RM = @RM@
SET_MAKE = @SET_MAKE@
SHA1SUM = @SHA1SUM@
SHELL = @SHELL@
STOW = @STOW@
STRIP = @STRIP@
TAR = @TAR@
TEXI2DVI = @TEXI2DVI@
UNZIP = @UNZIP@
USE_NLS = @USE_NLS@
VERSION = @VERSION@
WGET = @WGET@
XGETTEXT = @XGETTEXT@
XGETTEXT_015 = @XGETTEXT_015@
ZCAT = @ZCAT@
abs_builddir = @abs_builddir@
abs_srcdir = @abs_srcdir@
abs_top_builddir = @abs_top_builddir@
abs_top_srcdir = @abs_top_srcdir@
ac_ct_CC = @ac_ct_CC@
ac_ct_DLLTOOL = @ac_ct_DLLTOOL@
ac_ct_STRIP = @ac_ct_STRIP@
am__include = @am__include@
am__leading_dot = @am__leading_dot@
am__quote = @am__quote@
am__tar = @am__tar@
am__untar = @am__untar@
bindir = @bindir@
build = @build@
build_alias = @build_alias@
build_cpu = @build_cpu@
build_os = @build_os@
build_vendor = @build_vendor@
builddir = @builddir@
datadir = @datadir@
datarootdir = @datarootdir@
docdir = @docdir@
dvidir = @dvidir@
exec_prefix = @exec_prefix@
gpg4win_build_ex_list = @gpg4win_build_ex_list@
gpg4win_build_list = @gpg4win_build_list@
gpg4win_packages = @gpg4win_packages@
gpg4win_pkg_adns = @gpg4win_pkg_adns@
gpg4win_pkg_adns_deps = @gpg4win_pkg_adns_deps@
gpg4win_pkg_adns_version = @gpg4win_pkg_adns_version@
gpg4win_pkg_atk = @gpg4win_pkg_atk@
gpg4win_pkg_atk_deps = @gpg4win_pkg_atk_deps@
gpg4win_pkg_atk_dev = @gpg4win_pkg_atk_dev@
gpg4win_pkg_atk_src = @gpg4win_pkg_atk_src@
gpg4win_pkg_atk_version = @gpg4win_pkg_atk_version@
gpg4win_pkg_bzip2 = @gpg4win_pkg_bzip2@
gpg4win_pkg_bzip2_deps = @gpg4win_pkg_bzip2_deps@
gpg4win_pkg_bzip2_version = @gpg4win_pkg_bzip2_version@
gpg4win_pkg_cairo = @gpg4win_pkg_cairo@
gpg4win_pkg_cairo_deps = @gpg4win_pkg_cairo_deps@
gpg4win_pkg_cairo_dev = @gpg4win_pkg_cairo_dev@
gpg4win_pkg_cairo_src = @gpg4win_pkg_cairo_src@
gpg4win_pkg_cairo_version = @gpg4win_pkg_cairo_version@
gpg4win_pkg_claws_mail = @gpg4win_pkg_claws_mail@
gpg4win_pkg_claws_mail_deps = @gpg4win_pkg_claws_mail_deps@
gpg4win_pkg_claws_mail_version = @gpg4win_pkg_claws_mail_version@
gpg4win_pkg_crypt = @gpg4win_pkg_crypt@
gpg4win_pkg_crypt_deps = @gpg4win_pkg_crypt_deps@
gpg4win_pkg_crypt_version = @gpg4win_pkg_crypt_version@
gpg4win_pkg_curl = @gpg4win_pkg_curl@
gpg4win_pkg_curl_deps = @gpg4win_pkg_curl_deps@
gpg4win_pkg_curl_version = @gpg4win_pkg_curl_version@
gpg4win_pkg_dirmngr = @gpg4win_pkg_dirmngr@
gpg4win_pkg_dirmngr_deps = @gpg4win_pkg_dirmngr_deps@
gpg4win_pkg_dirmngr_version = @gpg4win_pkg_dirmngr_version@
gpg4win_pkg_enchant = @gpg4win_pkg_enchant@
gpg4win_pkg_enchant_deps = @gpg4win_pkg_enchant_deps@
gpg4win_pkg_enchant_version = @gpg4win_pkg_enchant_version@
gpg4win_pkg_expat = @gpg4win_pkg_expat@
gpg4win_pkg_expat_deps = @gpg4win_pkg_expat_deps@
gpg4win_pkg_expat_version = @gpg4win_pkg_expat_version@
gpg4win_pkg_fontconfig = @gpg4win_pkg_fontconfig@
gpg4win_pkg_fontconfig_deps = @gpg4win_pkg_fontconfig_deps@
gpg4win_pkg_fontconfig_dev = @gpg4win_pkg_fontconfig_dev@
gpg4win_pkg_fontconfig_src = @gpg4win_pkg_fontconfig_src@
gpg4win_pkg_fontconfig_version = @gpg4win_pkg_fontconfig_version@
gpg4win_pkg_freetype = @gpg4win_pkg_freetype@
gpg4win_pkg_freetype_deps = @gpg4win_pkg_freetype_deps@
gpg4win_pkg_freetype_dev = @gpg4win_pkg_freetype_dev@
gpg4win_pkg_freetype_src = @gpg4win_pkg_freetype_src@
gpg4win_pkg_freetype_version = @gpg4win_pkg_freetype_version@
gpg4win_pkg_gdk_pixbuf = @gpg4win_pkg_gdk_pixbuf@
gpg4win_pkg_gdk_pixbuf_deps = @gpg4win_pkg_gdk_pixbuf_deps@
gpg4win_pkg_gdk_pixbuf_version = @gpg4win_pkg_gdk_pixbuf_version@
gpg4win_pkg_gettext = @gpg4win_pkg_gettext@
gpg4win_pkg_gettext_deps = @gpg4win_pkg_gettext_deps@
gpg4win_pkg_gettext_version = @gpg4win_pkg_gettext_version@
gpg4win_pkg_glib = @gpg4win_pkg_glib@
gpg4win_pkg_glib_deps = @gpg4win_pkg_glib_deps@
gpg4win_pkg_glib_version = @gpg4win_pkg_glib_version@
gpg4win_pkg_gnupg2 = @gpg4win_pkg_gnupg2@
gpg4win_pkg_gnupg2_deps = @gpg4win_pkg_gnupg2_deps@
gpg4win_pkg_gnupg2_version = @gpg4win_pkg_gnupg2_version@
gpg4win_pkg_gnutls = @gpg4win_pkg_gnutls@
gpg4win_pkg_gnutls_deps = @gpg4win_pkg_gnutls_deps@
gpg4win_pkg_gnutls_version = @gpg4win_pkg_gnutls_version@
gpg4win_pkg_gpa = @gpg4win_pkg_gpa@
gpg4win_pkg_gpa_deps = @gpg4win_pkg_gpa_deps@
gpg4win_pkg_gpa_version = @gpg4win_pkg_gpa_version@
gpg4win_pkg_gpgme = @gpg4win_pkg_gpgme@
gpg4win_pkg_gpgme_deps = @gpg4win_pkg_gpgme_deps@
gpg4win_pkg_gpgme_version = @gpg4win_pkg_gpgme_version@
gpg4win_pkg_gtk_ = @gpg4win_pkg_gtk_@
gpg4win_pkg_gtk__deps = @gpg4win_pkg_gtk__deps@
gpg4win_pkg_gtk__version = @gpg4win_pkg_gtk__version@
gpg4win_pkg_libassuan = @gpg4win_pkg_libassuan@
gpg4win_pkg_libassuan_deps = @gpg4win_pkg_libassuan_deps@
gpg4win_pkg_libassuan_version = @gpg4win_pkg_libassuan_version@
gpg4win_pkg_libetpan = @gpg4win_pkg_libetpan@
gpg4win_pkg_libetpan_deps = @gpg4win_pkg_libetpan_deps@
gpg4win_pkg_libetpan_version = @gpg4win_pkg_libetpan_version@
gpg4win_pkg_libffi = @gpg4win_pkg_libffi@
gpg4win_pkg_libffi_deps = @gpg4win_pkg_libffi_deps@
gpg4win_pkg_libffi_version = @gpg4win_pkg_libffi_version@
gpg4win_pkg_libgcrypt = @gpg4win_pkg_libgcrypt@
gpg4win_pkg_libgcrypt_deps = @gpg4win_pkg_libgcrypt_deps@
gpg4win_pkg_libgcrypt_version = @gpg4win_pkg_libgcrypt_version@
gpg4win_pkg_libgpg_error = @gpg4win_pkg_libgpg_error@
gpg4win_pkg_libgpg_error_deps = @gpg4win_pkg_libgpg_error_deps@
gpg4win_pkg_libgpg_error_version = @gpg4win_pkg_libgpg_error_version@
gpg4win_pkg_libgsasl = @gpg4win_pkg_libgsasl@
gpg4win_pkg_libgsasl_deps = @gpg4win_pkg_libgsasl_deps@
gpg4win_pkg_libgsasl_version = @gpg4win_pkg_libgsasl_version@
gpg4win_pkg_libiconv = @gpg4win_pkg_libiconv@
gpg4win_pkg_libiconv_deps = @gpg4win_pkg_libiconv_deps@
gpg4win_pkg_libiconv_version = @gpg4win_pkg_libiconv_version@
gpg4win_pkg_libksba = @gpg4win_pkg_libksba@
gpg4win_pkg_libksba_deps = @gpg4win_pkg_libksba_deps@
gpg4win_pkg_libksba_version = @gpg4win_pkg_libksba_version@
gpg4win_pkg_libpng = @gpg4win_pkg_libpng@
gpg4win_pkg_libpng_deps = @gpg4win_pkg_libpng_deps@
gpg4win_pkg_libpng_version = @gpg4win_pkg_libpng_version@
gpg4win_pkg_libtasn1 = @gpg4win_pkg_libtasn1@
gpg4win_pkg_libtasn1_deps = @gpg4win_pkg_libtasn1_deps@
gpg4win_pkg_libtasn1_version = @gpg4win_pkg_libtasn1_version@
gpg4win_pkg_libxml2 = @gpg4win_pkg_libxml2@
gpg4win_pkg_libxml2_deps = @gpg4win_pkg_libxml2_deps@
gpg4win_pkg_libxml2_version = @gpg4win_pkg_libxml2_version@
gpg4win_pkg_pango = @gpg4win_pkg_pango@
gpg4win_pkg_pango_deps = @gpg4win_pkg_pango_deps@
gpg4win_pkg_pango_dev = @gpg4win_pkg_pango_dev@
gpg4win_pkg_pango_src = @gpg4win_pkg_pango_src@
gpg4win_pkg_pango_version = @gpg4win_pkg_pango_version@
gpg4win_pkg_pinentry = @gpg4win_pkg_pinentry@
gpg4win_pkg_pinentry_deps = @gpg4win_pkg_pinentry_deps@
gpg4win_pkg_pinentry_version = @gpg4win_pkg_pinentry_version@
gpg4win_pkg_pkgconfig = @gpg4win_pkg_pkgconfig@
gpg4win_pkg_pkgconfig_deps = @gpg4win_pkg_pkgconfig_deps@
gpg4win_pkg_pkgconfig_src = @gpg4win_pkg_pkgconfig_src@
gpg4win_pkg_pkgconfig_version = @gpg4win_pkg_pkgconfig_version@
gpg4win_pkg_regex = @gpg4win_pkg_regex@
gpg4win_pkg_regex_deps = @gpg4win_pkg_regex_deps@
gpg4win_pkg_regex_version = @gpg4win_pkg_regex_version@
gpg4win_pkg_w32pth = @gpg4win_pkg_w32pth@
gpg4win_pkg_w32pth_deps = @gpg4win_pkg_w32pth_deps@
gpg4win_pkg_w32pth_version = @gpg4win_pkg_w32pth_version@
gpg4win_pkg_zlib = @gpg4win_pkg_zlib@
gpg4win_pkg_zlib_deps = @gpg4win_pkg_zlib_deps@
gpg4win_pkg_zlib_version = @gpg4win_pkg_zlib_version@
host = @host@
host_alias = @host_alias@
host_cpu = @host_cpu@
host_os = @host_os@
host_vendor = @host_vendor@
htmldir = @htmldir@
includedir = @includedir@
infodir = @infodir@
install_sh = @install_sh@
libdir = @libdir@
libexecdir = @libexecdir@
localedir = @localedir@
localstatedir = @localstatedir@
mandir = @mandir@
mkdir_p = @mkdir_p@
oldincludedir = @oldincludedir@
pdfdir = @pdfdir@
prefix = @prefix@
program_transform_name = @program_transform_name@
psdir = @psdir@
sbindir = @sbindir@
sharedstatedir = @sharedstatedir@
srcdir = @srcdir@
sysconfdir = @sysconfdir@
target_alias = @target_alias@
top_build_prefix = @top_build_prefix@
top_builddir = @top_builddir@
top_srcdir = @top_srcdir@
EXTRA_DIST = pkg-config gpg4win.nsi gpg4win-src.nsi \
	config.site config.nsi.in \
        installer-options.ini.in libiconv.def libintl.def loreley.mid \
        gpg4win-splash.wav gpgwrap.c exdll.h g4wihelp.c g4wihelp.nsi \
        inst-sections.nsi installer.nsi installer-finish.nsi  \
        sha1sum.c mkportable.c mkportable-full.h \
        potomo Memento.nsh dirmngr.conf \
        inst-gpg4win.nsi	   uninst-gpg4win.nsi	      \
        inst-atk.nsi               uninst-atk.nsi	      \
        inst-expat.nsi		   uninst-expat.nsi	      \
        inst-freetype.nsi	   uninst-freetype.nsi	      \
        inst-fontconfig.nsi	   uninst-fontconfig.nsi      \
        inst-cairo.nsi		   uninst-cairo.nsi	      \
        inst-libgsasl.nsi	   uninst-libgsasl.nsi        \
        inst-libtasn1.nsi	   uninst-libtasn1.nsi        \
        inst-gnutls.nsi		   uninst-gnutls.nsi	      \
        inst-curl.nsi		   uninst-curl.nsi	      \
        inst-libxml2.nsi	   uninst-libxml2.nsi	      \
        inst-libetpan.nsi	   uninst-libetpan.nsi        \
        inst-claws-mail.nsi	   uninst-claws-mail.nsi      \
        inst-crypt.nsi		   uninst-crypt.nsi	      \
        inst-dirmngr.nsi		 uninst-dirmngr.nsi	      \
        inst-gettext.nsi	   uninst-gettext.nsi	      \
        inst-libffi.nsi		   uninst-libffi.nsi	      \
        inst-glib.nsi		   uninst-glib.nsi	      \
        inst-gnupg2.nsi		   uninst-gnupg2.nsi	      \
        inst-gpa.nsi		   uninst-gpa.nsi	      \
        inst-gpgme.nsi		   uninst-gpgme.nsi	      \
        inst-gdk-pixbuf.nsi        uninst-gdk-pixbuf.nsi      \
        inst-gtk+.nsi		   uninst-gtk+.nsi	      \
        inst-libassuan.nsi	   uninst-libassuan.nsi	      \
        inst-libgcrypt.nsi	   uninst-libgcrypt.nsi	      \
        inst-libgpg-error.nsi	   uninst-libgpg-error.nsi    \
        inst-libiconv.nsi	   uninst-libiconv.nsi	      \
        inst-libksba.nsi	   uninst-libksba.nsi	      \
        inst-adns.nsi	           uninst-adns.nsi	      \
        inst-libpng.nsi		   uninst-libpng.nsi	      \
        inst-enchant.nsi	   uninst-enchant.nsi	      \
        inst-pango.nsi		   uninst-pango.nsi	      \
        inst-pinentry.nsi	   uninst-pinentry.nsi	      \
        inst-pkgconfig.nsi	   uninst-pkgconfig.nsi	      \
        inst-regex.nsi		   uninst-regex.nsi	      \
        inst-w32pth.nsi		   uninst-w32pth.nsi	      \
        inst-zlib.nsi        	   uninst-zlib.nsi            \
	inst-bzip2.nsi             uninst-bzip2.nsi           \
        inst-final.nsi

SUBDIRS = dictionaries
gpg4win_readme_ll = en de ar es fr ru pt
gpg4win_howto_smime_ll = en de
foosum_exe = sha1sum.exe md5sum.exe sha256sum.exe mkportable.exe

# Need to clean the dll because we bypassed automake.
CLEANFILES = g4wihelp.dll versioninfo.txt \
             installer-options.ini NEWS.tmp COMPONENTS-list.tmp \
	     license.blurb cdversioninfo.tmp \
	     gpgwrap.exe gpgwrap-2.exe $(foosum_exe)


# Supported source packages.
gpg4win_spkgs = glib libffi gdk-pixbuf gtk+ expat \
                libgpg-error gpgme libpng enchant \
		gpa libgsasl libtasn1 opencdk gnutls curl libxml2 \
                libetpan claws-mail \
		gnupg2 pinentry libassuan libksba libgcrypt \
		adns dirmngr w32pth regex libiconv gettext


# Supported source packages to build in an additional architecture
gpg4win_expkgs = libgpg-error libassuan libiconv gettext w32pth

# Extra options to configure for individual packages.
# We can use $(idir) here for the installation prefix.
gpg4win_pkg_glib_make_args = -j$(NUMPROC)
gpg4win_pkg_libgpg_error_make_args = -j$(NUMPROC)
gpg4win_pkg_gpgme_make_args = -j$(NUMPROC)
gpg4win_pkg_expat_make_args = -j$(NUMPROC)
gpg4win_pkg_libpng_make_args = -j$(NUMPROC)
gpg4win_pkg_enchant_make_args = -j$(NUMPROC)
gpg4win_pkg_gpa_make_args = -j$(NUMPROC)
gpg4win_pkg_libgsasl_make_args = -j$(NUMPROC)
gpg4win_pkg_libtasn1_make_args = -j$(NUMPROC)
gpg4win_pkg_opencdk_make_args = -j$(NUMPROC)
gpg4win_pkg_curl_make_args = -j$(NUMPROC)
gpg4win_pkg_libxml2_make_args = -j$(NUMPROC)
gpg4win_pkg_libetpan_make_args = -j$(NUMPROC)
gpg4win_pkg_claws_mail_make_args = -j$(NUMPROC)
gpg4win_pkg_gnupg2_make_args = -j$(NUMPROC)
gpg4win_pkg_pinentry_make_args = -j$(NUMPROC)
gpg4win_pkg_libassuan_make_args = -j$(NUMPROC)
gpg4win_pkg_libksba_make_args = -j$(NUMPROC)
gpg4win_pkg_libgcrypt_make_args = -j$(NUMPROC)
gpg4win_pkg_adns_make_args = -j$(NUMPROC)
gpg4win_pkg_dirmngr_make_args = -j$(NUMPROC)
gpg4win_pkg_w32pth_make_args = -j$(NUMPROC)
gpg4win_pkg_libiconv_ex_configure = \
	--enable-shared=no --enable-static=yes

gpg4win_pkg_gettext_configure = \
  --with-lib-prefix=$(idir) --with-libiconv-prefix=$(idir) \
  CPPFLAGS=-I$(idir)/include CFLAGS=-O2 LDFLAGS=-L$(idir)/lib

gpg4win_pkg_gettext_ex_configure = \
  --with-lib-prefix=$(ex_idir) --with-libiconv-prefix=$(ex_idir) \
  CPPFLAGS=-I$(ex_idir)/include CFLAGS=-O2 LDFLAGS=-L$(ex_idir)/lib


# We only need gettext-runtime and there is sadly no top level
# configure option for this
gpg4win_pkg_gettext_make_dir = gettext-runtime
gpg4win_pkg_gettext_make_dir_inst = gettext-runtime
gpg4win_pkg_gettext_ex_make_dir = gettext-runtime
gpg4win_pkg_gettext_ex_make_dir_inst = gettext-runtime
gpg4win_pkg_glib_configure = \
  --disable-modular-tests \
  --with-lib-prefix=$(idir) --with-libiconv-prefix=$(idir) \
  CPPFLAGS=-I$(idir)/include LDFLAGS=-L$(idir)/lib CCC=$(host)-g++

gpg4win_pkg_glib_extracflags = -march=i486
gpg4win_pkg_gdk_pixbuf_configure = \
  --with-lib-prefix=$(idir) --with-libiconv-prefix=$(idir) \
  --with-included-loaders=yes \
  CPPFLAGS=-I$(idir)/include LDFLAGS=-L$(idir)/lib

gpg4win_pkg_gtk__configure = \
  CPPFLAGS=-I$(idir)/include LDFLAGS=-L$(idir)/lib --disable-cups


# We would like to use --with-libiconv-prefix and
# --with-libintl-prefix, but these don't work with the cheesy
# non-"libfoo.la" versions of iconv and gettext that we are using.
#gpg4win_pkg_libgpg_error_configure = \
#  --with-libiconv-prefix=$(idir) --with-libintl-prefix=$(idir)
gpg4win_pkg_libgpg_error_configure = --silent \
  CPPFLAGS=-I$(idir)/include LDFLAGS=-L$(idir)/lib \
  --enable-static

gpg4win_pkg_libgpg_error_ex_configure = --silent \
  CPPFLAGS=-I$(idir)/include LDFLAGS=-L$(idir)/lib \
  --enable-static

gpg4win_pkg_libassuan_configure = --silent --enable-static
gpg4win_pkg_libassuan_ex_configure = --silent --enable-static
gpg4win_pkg_libksba_configure = --silent \
  --with-gpg-error-prefix=$(idir)


# Using gpgsm with VirtualBox on AES-NI hardware crashes gpg-agent.
# However, the Libgcrypt's regression tests work just fine.  I don't
# have a windows instance on AES-NI, thus I can't currently debug
# this. As a workaround we disable AES-NI for now.
gpg4win_pkg_libgcrypt_configure = --silent \
  --with-gpg-error-prefix=$(idir) \
  --disable-aesni-support

gpg4win_pkg_adns_configure = --silent
gpg4win_pkg_libpng_configure = HAVE_SOLARIS_LD_FALSE=yes CPPFLAGS=\"-I$(idir)/include -DPNG_BUILD_DLL\" LDFLAGS=\"-L$(idir)/lib\" LIBPNG_DEFINES=\"-DPNG_BUILD_DLL\"
gpg4win_pkg_enchant_configure = CPPFLAGS=\"-I$(idir)/include -UENCHANT_GLOBAL_MODULE_DIR -UENCHANT_GLOBAL_ORDERING -UENCHANT_MYSPELL_DICT_DIR -UENCHANT_USPELL_DICT_DIR\" LDFLAGS=\"-L$(idir)/lib\"
gpg4win_pkg_dirmngr_configure = \
  --with-gpg-error-prefix=$(idir) \
  --with-ksba-prefix=$(idir) \
  --with-libgcrypt-prefix=$(idir) \
  --with-libassuan-prefix=$(idir) \
  --with-pth-prefix=$(idir)

gpg4win_pkg_gnupg2_configure = \
  --with-gpg-error-prefix=$(idir) \
  --with-ksba-prefix=$(idir) \
  --with-libgcrypt-prefix=$(idir) \
  --with-libassuan-prefix=$(idir) \
  --with-zlib=$(idir) \
  --with-bzip2=$(idir) \
  --with-pth-prefix=$(idir) \
  --with-adns=$(idir) \
  --without-included-gettext \
  --enable-gpgtar \
  --disable-regex

gpg4win_pkg_pinentry_configure = \
  --disable-pinentry-gtk \
  --enable-pinentry-gtk2 \
  --with-glib-prefix=$(idir) --with-gtk-prefix=$(idir) \
  CPPFLAGS=-I$(idir)/include LDFLAGS=-L$(idir)/lib \
  CXXFLAGS=-static-libstdc++

#  --with-libiconv-prefix=$(idir) --with-libintl-prefix=$(idir)

# The LDFLAGS is needed for -lintl for glib.
gpg4win_pkg_gpgme_configure = --silent \
  --with-gpg-error-prefix=$(idir) --enable-static \
  `test -n "@HAVE_PKG_GLIB@" && echo "--enable-w32-glib"` \
  --disable-w32-qt LDFLAGS=-L$(idir)/lib

gpg4win_pkg_gpa_configure = --silent \
  --with-libiconv-prefix=$(idir) --with-libintl-prefix=$(idir) \
  --with-gpgme-prefix=$(idir) --with-zlib=$(idir) \
  --with-libassuan-prefix=$(idir) --with-gpg-error-prefix=$(idir)


# We want to build with libgcrypt
# We can't use pkcs11 tue to tto much additional dependencies.
gpg4win_pkg_gnutls_configure = \
  --disable-cxx \
  --with-libgcrypt \
  --without-p11-kit \
  --with-libtasn1-prefix=$(idir) \
  --with-libgcrypt-prefix=$(idir) \
	CPPFLAGS=\"-I$(idir)/include\" LDFLAGS=\"-L$(idir)/lib\"


# In 2.12.21 gnutls_openssl is not linked to libtasn1, thus we use
# this hack to here.  (Using the included minitasn does work either
# due to a missing soruce file.)
gpg4win_pkg_gnutls_make_args = \
   LTLIBTASN1=-ltasn1

gpg4win_pkg_curl_configure = \
  --with-gnutls --without-ca-bundle --with-libiconv-prefix=$(idir) \
  CPPFLAGS=\"-I$(idir)/include\" LIBS=\"-L$(idir)/lib\"

gpg4win_pkg_libxml2_configure = \
  --enable-shared --without-python --with-iconv=$(idir)

gpg4win_pkg_libetpan_configure = --with-gnutls --enable-threads \
  CPPFLAGS=\"-I$(idir)/include\" \
  LDFLAGS=\"-L$(idir)/lib\" LIBS=\"-lpthread\"

gpg4win_pkg_claws_mail_configure = \
  --with-lib-prefix=$(idir) --with-libiconv-prefix=$(idir) \
  --with-gpg-error-prefix=$(idir) --with-gpgme-prefix=$(idir) \
  --with-config-dir="Claws-mail" --enable-pthread --enable-gnutls \
  --enable-libetpan --disable-dbus --disable-valgrind --disable-ipv6 \
  --disable-jpilot --disable-startup-notification \
  --disable-spamassassin-plugin --disable-bogofilter-plugin \
  --disable-fancy-plugin --disable-geolocation-plugin \
  --disable-acpi_notifier-plugin --disable-clamd-plugin \
  --disable-bogofilter-plugin --disable-spamassassin-plugin \
  --disable-perl-plugin --disable-python-plugin --disable-demo-plugin \
  --disable-newmail-plugin --disable-mailmbox-plugin \
	CFLAGS=\"-ggdb\" \
	CPPFLAGS=\"-I$(idir)/include\" \
	LDFLAGS=\"-L$(idir)/lib\" LIBS=\"-lexpat\"


# This is not anymore needed sinces 3.8.0 already builds a PDF version.
# define gpg4win_pkg_claws_mail_post_install
# (for i in de en ; do \
#     (cd $$$${pkgidir}/share/doc/claws-mail/manual/$$$${i}; \
#     ps2pdf claws-mail-manual.ps); \
#  done)
# endef

# Supported make-only source packages.
gpg4win_mpkgs = bzip2 zlib crypt

# Extra options for the make invocations for individual packages.
# make_flags is used for building, make_args_inst is used for installing.
gpg4win_pkg_bzip2_make_args = -j$(NUMPROC) \
  CC=$(CC) AR=$(AR) RANLIB=$(RANLIB)

gpg4win_pkg_bzip2_make_args_inst = \
  PREFIX=$$$${pkgidir} CC=$(CC) AR=$(AR) RANLIB=$(RANLIB)

gpg4win_pkg_crypt_make_args = -j$(NUMPROC) \
  CC=$(CC) AR=$(AR)

gpg4win_pkg_crypt_make_args_inst = \
  prefix=$$$${pkgidir}

gpg4win_pkg_zlib_make_args = -j$(NUMPROC) \
  -fwin32/Makefile.gcc PREFIX=$(host)- IMPLIB=libz.dll.a

gpg4win_pkg_zlib_make_args_inst = -fwin32/Makefile.gcc install \
	BINARY_PATH=$$$${pkgidir}/bin INCLUDE_PATH=$$$${pkgidir}/include \
	LIBRARY_PATH=$$$${pkgidir}/lib SHARED_MODE=1 IMPLIB=libz.dll.a


# Supported binary packages.
gpg4win_bpkgs = pkgconfig pango freetype fontconfig \
                cairo atk

common_nsi = inst-sections.nsi installer.nsi installer-finish.nsi	\
  $(addsuffix .nsi,$(addprefix inst-,$(gpg4win_build_list)))		\
  $(addsuffix .nsi,$(addprefix uninst-,$(gpg4win_build_list)))

@BUILD_SOURCE_INSTALLER_FALSE@all_src = 
@BUILD_SOURCE_INSTALLER_TRUE@all_src = claws-mail-src-$(VERSION).exe
all_full = claws-mail-$(VERSION).exe
all: all-recursive

.SUFFIXES:
$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)
	@for dep in $?; do \
	  case '$(am__configure_deps)' in \
	    *$$dep*) \
	      ( cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh ) \
	        && { if test -f $@; then exit 0; else break; fi; }; \
	      exit 1;; \
	  esac; \
	done; \
	echo ' cd $(top_srcdir) && $(AUTOMAKE) --gnu src/Makefile'; \
	$(am__cd) $(top_srcdir) && \
	  $(AUTOMAKE) --gnu src/Makefile
.PRECIOUS: Makefile
Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
	@case '$?' in \
	  *config.status*) \
	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
	  *) \
	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
	esac;

$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh

$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)
	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
$(am__aclocal_m4_deps):
config.nsi: $(top_builddir)/config.status $(srcdir)/config.nsi.in
	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
gpg4win.mk: $(top_builddir)/config.status $(srcdir)/gpg4win.mk.in
	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@

# This directory's subdirectories are mostly independent; you can cd
# into them and run 'make' without going through this Makefile.
# To change the values of 'make' variables: instead of editing Makefiles,
# (1) if the variable is set in 'config.status', edit 'config.status'
#     (which will cause the Makefiles to be regenerated when you run 'make');
# (2) otherwise, pass the desired values on the 'make' command line.
$(am__recursive_targets):
	@fail=; \
	if $(am__make_keepgoing); then \
	  failcom='fail=yes'; \
	else \
	  failcom='exit 1'; \
	fi; \
	dot_seen=no; \
	target=`echo $@ | sed s/-recursive//`; \
	case "$@" in \
	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
	  *) list='$(SUBDIRS)' ;; \
	esac; \
	for subdir in $$list; do \
	  echo "Making $$target in $$subdir"; \
	  if test "$$subdir" = "."; then \
	    dot_seen=yes; \
	    local_target="$$target-am"; \
	  else \
	    local_target="$$target"; \
	  fi; \
	  ($(am__cd) $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
	  || eval $$failcom; \
	done; \
	if test "$$dot_seen" = "no"; then \
	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
	fi; test -z "$$fail"

ID: $(am__tagged_files)
	$(am__define_uniq_tagged_files); mkid -fID $$unique
tags: tags-recursive
TAGS: tags

tags-am: $(TAGS_DEPENDENCIES) $(am__tagged_files)
	set x; \
	here=`pwd`; \
	if ($(ETAGS) --etags-include --version) >/dev/null 2>&1; then \
	  include_option=--etags-include; \
	  empty_fix=.; \
	else \
	  include_option=--include; \
	  empty_fix=; \
	fi; \
	list='$(SUBDIRS)'; for subdir in $$list; do \
	  if test "$$subdir" = .; then :; else \
	    test ! -f $$subdir/TAGS || \
	      set "$$@" "$$include_option=$$here/$$subdir/TAGS"; \
	  fi; \
	done; \
	$(am__define_uniq_tagged_files); \
	shift; \
	if test -z "$(ETAGS_ARGS)$$*$$unique"; then :; else \
	  test -n "$$unique" || unique=$$empty_fix; \
	  if test $$# -gt 0; then \
	    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
	      "$$@" $$unique; \
	  else \
	    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
	      $$unique; \
	  fi; \
	fi
ctags: ctags-recursive

CTAGS: ctags
ctags-am: $(TAGS_DEPENDENCIES) $(am__tagged_files)
	$(am__define_uniq_tagged_files); \
	test -z "$(CTAGS_ARGS)$$unique" \
	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
	     $$unique

GTAGS:
	here=`$(am__cd) $(top_builddir) && pwd` \
	  && $(am__cd) $(top_srcdir) \
	  && gtags -i $(GTAGS_ARGS) "$$here"
cscopelist: cscopelist-recursive

cscopelist-am: $(am__tagged_files)
	list='$(am__tagged_files)'; \
	case "$(srcdir)" in \
	  [\\/]* | ?:[\\/]*) sdir="$(srcdir)" ;; \
	  *) sdir=$(subdir)/$(srcdir) ;; \
	esac; \
	for i in $$list; do \
	  if test -f "$$i"; then \
	    echo "$(subdir)/$$i"; \
	  else \
	    echo "$$sdir/$$i"; \
	  fi; \
	done >> $(top_builddir)/cscope.files

distclean-tags:
	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags

distdir: $(DISTFILES)
	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
	list='$(DISTFILES)'; \
	  dist_files=`for file in $$list; do echo $$file; done | \
	  sed -e "s|^$$srcdirstrip/||;t" \
	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
	case $$dist_files in \
	  */*) $(MKDIR_P) `echo "$$dist_files" | \
			   sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
			   sort -u` ;; \
	esac; \
	for file in $$dist_files; do \
	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
	  if test -d $$d/$$file; then \
	    dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
	    if test -d "$(distdir)/$$file"; then \
	      find "$(distdir)/$$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
	    fi; \
	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
	      cp -fpR $(srcdir)/$$file "$(distdir)$$dir" || exit 1; \
	      find "$(distdir)/$$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
	    fi; \
	    cp -fpR $$d/$$file "$(distdir)$$dir" || exit 1; \
	  else \
	    test -f "$(distdir)/$$file" \
	    || cp -p $$d/$$file "$(distdir)/$$file" \
	    || exit 1; \
	  fi; \
	done
	@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
	  if test "$$subdir" = .; then :; else \
	    $(am__make_dryrun) \
	      || test -d "$(distdir)/$$subdir" \
	      || $(MKDIR_P) "$(distdir)/$$subdir" \
	      || exit 1; \
	    dir1=$$subdir; dir2="$(distdir)/$$subdir"; \
	    $(am__relativize); \
	    new_distdir=$$reldir; \
	    dir1=$$subdir; dir2="$(top_distdir)"; \
	    $(am__relativize); \
	    new_top_distdir=$$reldir; \
	    echo " (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) top_distdir="$$new_top_distdir" distdir="$$new_distdir" \\"; \
	    echo "     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)"; \
	    ($(am__cd) $$subdir && \
	      $(MAKE) $(AM_MAKEFLAGS) \
	        top_distdir="$$new_top_distdir" \
	        distdir="$$new_distdir" \
		am__remove_distdir=: \
		am__skip_length_check=: \
		am__skip_mode_fix=: \
	        distdir) \
	      || exit 1; \
	  fi; \
	done
check-am: all-am
check: check-recursive
all-am: Makefile all-local
installdirs: installdirs-recursive
installdirs-am:
install: install-recursive
install-exec: install-exec-recursive
install-data: install-data-recursive
uninstall: uninstall-recursive

install-am: all-am
	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am

installcheck: installcheck-recursive
install-strip:
	if test -z '$(STRIP)'; then \
	  $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
	    install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
	      install; \
	else \
	  $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
	    install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
	    "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'" install; \
	fi
mostlyclean-generic:

clean-generic:
	-test -z "$(CLEANFILES)" || rm -f $(CLEANFILES)

distclean-generic:
	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
	-test . = "$(srcdir)" || test -z "$(CONFIG_CLEAN_VPATH_FILES)" || rm -f $(CONFIG_CLEAN_VPATH_FILES)

maintainer-clean-generic:
	@echo "This command is intended for maintainers to use"
	@echo "it deletes files that may require special tools to rebuild."
clean: clean-recursive

clean-am: clean-generic clean-local mostlyclean-am

distclean: distclean-recursive
	-rm -f Makefile
distclean-am: clean-am distclean-generic distclean-tags

dvi: dvi-recursive

dvi-am:

html: html-recursive

html-am:

info: info-recursive

info-am:

install-data-am:

install-dvi: install-dvi-recursive

install-dvi-am:

install-exec-am:

install-html: install-html-recursive

install-html-am:

install-info: install-info-recursive

install-info-am:

install-man:

install-pdf: install-pdf-recursive

install-pdf-am:

install-ps: install-ps-recursive

install-ps-am:

installcheck-am:

maintainer-clean: maintainer-clean-recursive
	-rm -f Makefile
maintainer-clean-am: distclean-am maintainer-clean-generic

mostlyclean: mostlyclean-recursive

mostlyclean-am: mostlyclean-generic

pdf: pdf-recursive

pdf-am:

ps: ps-recursive

ps-am:

uninstall-am:

.MAKE: $(am__recursive_targets) install-am install-strip

.PHONY: $(am__recursive_targets) CTAGS GTAGS TAGS all all-am all-local \
	check check-am clean clean-generic clean-local cscopelist-am \
	ctags ctags-am distclean distclean-generic distclean-tags \
	distdir dvi dvi-am html html-am info info-am install \
	install-am install-data install-data-am install-dvi \
	install-dvi-am install-exec install-exec-am install-html \
	install-html-am install-info install-info-am install-man \
	install-pdf install-pdf-am install-ps install-ps-am \
	install-strip installcheck installcheck-am installdirs \
	installdirs-am maintainer-clean maintainer-clean-generic \
	mostlyclean mostlyclean-generic pdf pdf-am ps ps-am tags \
	tags-am uninstall uninstall-am


# The GnuPG package provides man pages which we have to convert.
# We also create the MO files here.
define gpg4win_pkg_gnupg2_post_install
(for i in gpg2 gpgv2 gpgsm gpg-agent scdaemon gpg-connect-agent gpgconf ; \
  do man -Tlatin1 -l $$$${pkgidir}/share/man/man1/$$$${i}.1 | \
    sed `printf "s/_\b//g;s/\b.//g"` | \
    sed -e 's/$$$$/\r/' > $$$${pkgidir}/share/man/man1/$$$${i}.man ; \
 done ; \
 for i in `$(tsdir)/src/potomo --get-linguas $$$${pkgsdir}/po` ; do \
     $(MKDIR_P) $$$${pkgidir}/share/locale/$$$${i}/LC_MESSAGES || true; \
     rm $$$${pkgidir}/share/locale/$$$${i}/LC_MESSAGES/gnupg2.mo 2>/dev/null \
       || true; \
     $(tsdir)/src/potomo $$$${pkgsdir}/po/$$$${i}.po \
              $$$${pkgidir}/share/locale/$$$${i}/LC_MESSAGES/gnupg2.mo; \
 done)
endef

# We convert the PO files to UTF-8.  FIXME: This should be done in
# libgpg-error proper.
define gpg4win_pkg_libgpg_error_post_install
(for i in `$(tsdir)/src/potomo --get-linguas $$$${pkgsdir}/po` ; do \
   rm $$$${pkgidir}/share/locale/$$$${i}/LC_MESSAGES/libgpg-error.mo \
       2>/dev/null|| true; \
   $(tsdir)/src/potomo $$$${pkgsdir}/po/$$$${i}.po \
             $$$${pkgidir}/share/locale/$$$${i}/LC_MESSAGES/libgpg-error.mo; \
 done)
endef

# libiconv needs some special magic to generate a usable import
# library.
# define gpg4win_pkg_libiconv_post_install
# (cp $(srcdir)/libiconv.def $$$${pkgidir}/lib;		\
# cd $$$${pkgidir}/lib;					\
# $(DLLTOOL) --output-lib libiconv.dll.a --def libiconv.def)
# endef

# libiconv needs some special magic to generate a usable import
# library.  Note that we include some internal symbols that are not
# actually part of the DLL.  They are needed by the AM_GNU_GETTEXT
# configure test, but not used otherwise.
# define gpg4win_pkg_gettext_post_install
# (cp $(srcdir)/libintl.def $$$${pkgidir}/lib;		\
# cd $$$${pkgidir}/lib;					\
# $(DLLTOOL) --output-lib libintl.dll.a --def libintl.def)
# endef

# Zlib needs some special magic to generate a libtool file.
# We also install the pc file here.
define gpg4win_pkg_zlib_post_install
(mkdir $$$${pkgidir}/lib/pkgconfig || true;             \
cp $(abs_srcdir)/zlib.pc $$$${pkgidir}/lib/pkgconfig/;  \
cd $$$${pkgidir};					\
echo "# Generated by libtool" > lib/libz.la		\
echo "dlname='../bin/zlib1.dll'" >> lib/libz.la;	\
echo "library_names='libz.dll.a'" >> lib/libz.la;	\
echo "old_library='libz.a'" >> lib/libz.la;		\
echo "dependency_libs=''" >> lib/libz.la;		\
echo "current=1" >> lib/libz.la;			\
echo "age=2" >> lib/libz.la;				\
echo "revision=5" >> lib/libz.la;			\
echo "installed=yes" >> lib/libz.la;			\
echo "shouldnotlink=no" >> lib/libz.la;			\
echo "dlopen=''" >> lib/libz.la;			\
echo "dlpreopen=''" >> lib/libz.la;			\
echo "libdir=\"$$$${pkgidir}/lib\"" >> lib/libz.la)
endef

# To make sure that we link against the static versions we need
# remove the import libs from crypt
#define gpg4win_pkg_crypt_post_install
#(cd $$$${pkgidir}/lib && rm libcrypt.dll.a libcrypt.lib)
#endef

# We need to fix the prefix in the various packages using pkgconfig,
# or we can't substitute it properly in our pkg-config wrapper.
# glib also installs an empty charset.alias for mingw which creates
# a stow conflict with the one from iconv.
define gpg4win_pkg_glib_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`; \
 rm $$$${pkgidir}/lib/charset.alias)
endef

define gpg4win_pkg_libffi_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_gdk_pixbuf_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_atk_post_install
 (cd $$$${pkgidir_dev};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_freetype_post_install
 (cd $$$${pkgidir_dev};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_fontconfig_post_install
 (cd $$$${pkgidir_dev};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_cairo_post_install
 (cd $$$${pkgidir_dev};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_pango_post_install
 (cd $$$${pkgidir_dev};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_gtk__post_install
 (cd $$$${pkgidir_dev};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_libpng_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_enchant_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_libgsasl_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_libtasn1_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

define gpg4win_pkg_gnutls_post_install
 (cd $$$${pkgidir};							\
 perl -pi -e 's/^prefix=.*$$$$/prefix=\/usr/' `find . -name \*.pc`)
endef

#define gpg4win_pkg_libiconv_post_install
#(cp $(srcdir)/libiconv.def $$$${pkgidir}/lib;		\
#cd $$$${pkgidir}/lib;					\
#$(DLLTOOL) --output-lib libiconv.dll.a --def libiconv.def)
#endef

# Now do the bunch of the work.  This is a bunch of dirty magic to
# integrate our special makefile into automake, while not actually
# including it (make should include it).  This is in turn necessary
# because automake can't deal with the elegant magic in the actual
# Makefile.

define INCLUDE_BY_MAKE
include $(1)
endef

$(eval $(call INCLUDE_BY_MAKE,gpg4win.mk))

clean-local: clean-gpg4win

# Prepare the versioninfo file.  The pipeline extracts the last
# occurrence of a package with the same name, sorts the entries and
# writes the file with DOS line endings.  This helps to avoid
# duplicate entries in case one package has been rebuild (which is
# common when developing a new version).
versioninfo.txt:
	$(SHA1SUM) $(pkg_files) </dev/null > versioninfo.tmp
	set -e; \
	( while read a b; do echo "$$a $$(basename $$b)"; \
            done < versioninfo.tmp \
          | sort -k2 -sf | tac | uniq -f1 ; \
          echo '=========== SHA-1 checksum ============= == package ==' \
         ) | tac | awk '{printf "%s\r\n", $$0}' > versioninfo.txt
	-rm versioninfo.tmp

NEWS.tmp : $(top_srcdir)/NEWS
	 awk '/^#/ {next} /^\(de\)/ {skip=1;next} /^[^[:space:]]/ {skip=0} \
             !skip { sub(/^\(en\)/,"   *"); print }' \
             <$(top_srcdir)/NEWS >NEWS.tmp

COMPONENTS-list.tmp : $(top_srcdir)/NEWS
	awk '/^~~~~~~~~~~~/ { ok++; next} ok==1 {print "    "$$0}' \
            < $(top_srcdir)/NEWS > COMPONENTS-list.tmp

installer-options.ini : $(top_srcdir)/src/installer-options.ini.in
	cat $(top_srcdir)/src/installer-options.ini.in >installer-options.ini

# For some nut-crazy reason someone thought it would be a great idea
# if makensis changed to the directory of the source file at startup.
# So we have to pull a couple of strings to correct this.
claws-mail-$(VERSION).exe: gpg4win.nsi $(common_nsi) stamps/stamp-final \
                        g4wihelp.dll gpgwrap.exe gpgwrap-2.exe \
		        $(foosum_exe) \
	                license.blurb installer-options.ini versioninfo.txt
	$(MAKENSIS) -V3 -DBUILD_DIR=`pwd` -DTOP_SRCDIR=$(top_srcdir) \
           -DSRCDIR=$(srcdir) $(EXTRA_MAKENSIS_FLAGS) $(srcdir)/gpg4win.nsi

claws-mail-$(VERSION).wix: gpg4win.nsi $(common_nsi) stamps/stamp-final \
			gpgwrap.exe gpgwrap-2.exe \
		        $(foosum_exe) \
			versioninfo.txt
	perl make-msi.pl --guids $(srcdir)/make-msi.guids \
		--manifest gpg4win-$(VERSION).files \
		-DBUILD_DIR=. -DTOP_SRCDIR=$(top_srcdir) \
		-DSRCDIR=$(srcdir) $(srcdir)/gpg4win.nsi > $@

.PHONY: msi
msi: claws-mail-$(VERSION).wix

stamps/stamp-dist-self: versioninfo.txt
	(set -e; cd ..; make dist-bzip2)
	touch stamps/stamp-dist-self

claws-mail-src-$(VERSION).exe: gpg4win-src.nsi $(common_nsi) \
	stamps/stamp-final \
	stamps/stamp-dist-self installer-options.ini \
	license.blurb
	$(MAKENSIS) -V3 -DBUILD_DIR=`pwd` -DTOP_SRCDIR=$(top_srcdir) \
	  -DSRCDIR=$(srcdir) $(EXTRA_MAKENSIS_FLAGS) $(srcdir)/gpg4win-src.nsi

license.blurb: $(top_srcdir)/doc/license-page $(top_srcdir)/doc/GPLv3
	cat $(top_srcdir)/doc/license-page $(top_srcdir)/doc/GPLv3 >$@

g4wihelp.dll: g4wihelp.c exdll.h
	$(CC) -I. -shared -O2 -o g4wihelp.dll $(srcdir)/g4wihelp.c \
	   -lwinmm -lgdi32
	$(STRIP) g4wihelp.dll

gpgwrap.exe: gpgwrap.c
	$(CC) -I. -I.. -DHAVE_CONFIG_H -O2 -o $@ $^
	$(STRIP) $@

gpgwrap-2.exe: gpgwrap.c
	$(CC) -I. -I.. -DHAVE_CONFIG_H -DGPGWRAP_VARIANT=2 -O2 -o $@ $^
	$(STRIP) $@

sha1sum.exe: sha1sum.c
	$(CC) -O2 -o $@ $^
	$(STRIP) $@

md5sum.exe: sha1sum.c
	$(CC) -DBUILD_MD5SUM -O2 -o $@ $^
	$(STRIP) $@

sha256sum.exe: sha1sum.c
	$(CC) -DBUILD_SHA256SUM -O2 -o $@ $^
	$(STRIP) $@

mkportable.exe: mkportable.c mkportable-full.h
	$(CC) -O2 -o $@ $(srcdir)/mkportable.c
	$(STRIP) $@

all-local: $(all_full) $(all_src)

clean-local:
	rm -f claws-mail-$(VERSION).exe claws-mail-src-$(VERSION).exe

# Tell versions [3.59,3.63) of GNU make to not export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT:
